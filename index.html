<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>RockPaperScissors by ojaoc</title>
</head>

<body>
    <script>
    
    let computerScore = 0;
    let playerScore = 0;
    const options = ['rock', 'paper', 'scissors'];
    let r = 'rock';
    let p = 'paper';
    let s = 'scissors';

    alert("Let's play the game of Rock, Paper and Scissors. You have to type your play and for 5 times you will go against the computer. In the end, you will be presented with the result. Good luck!");

    function finalScore() {

        function close_window() {
                if (confirm("Close Window?")) {
                close();
                }
            }

                if ((playerScore==5) && (computerScore<playerScore)) {
                            alert(`You won the match! Your score: ${playerScore}  Computer Score: ${computerScore}`)
                            return close_window();

                        } else if ((computerScore==5) && (computerScore>playerScore)) {
                            alert(`You lost the match... Your score: ${playerScore}  Computer Score: ${computerScore}`)
                            return close_window();
                        
                        } else if ((computerScore==5) && (playerScore==5)) {
                            alert(`It's a tie! Your score: ${playerScore}  Computer Score: ${computerScore}`)
                            return close_window();

                        } else {
                            return game();
                        }
                    }
                

function game() {

    function getComputerPlay() {
        const randomNumber = Math.floor(Math.random() * 3);
        let computerInput = options[randomNumber];
        return computerInput;
    }

   function getPlayerPlay() {
        
        let playerInput = prompt("Rock, Paper or Scissors?").toLowerCase();
        
        if ((playerInput !== r) && (playerInput !== p) && (playerInput !== s)) {
            
            alert('Please insert a valid option.')
            getComputerPlay();
            return getPlayerPlay();

        } else {
            
            return playerInput;
        }
    }

    let computerPlay = getComputerPlay();
    let playerPlay = getPlayerPlay();

    
        function round() {

            
                switch (computerPlay+playerPlay) {
                    
                    case 'rockscissors':
                    case 'paperrock':
                    case 'scissorspaper':
                    computerScore++;
                    alert(`You lose. ${computerPlay} beats ${playerPlay}... Your score: ${playerScore}  Computer Score: ${computerScore}`);
                    return finalScore(); 
                    break;

                    case 'scissorsrock':
                    case 'rockpaper':
                    case 'paperscissors':
                    playerScore++;
                    alert(`You win! ${playerPlay} beats ${computerPlay}! Your score: ${playerScore}  Computer Score: ${computerScore}`);
                    return finalScore(); 
                    break;

                    default:
                    computerScore++;
                    playerScore++;
                    alert(`It's a tie... Your score: ${playerScore}  Computer Score: ${computerScore}`);
                    return finalScore();
                    break;
                } 
        
        }

            round();
}
        
        game();
 
  </script>
</body>

</html>